<!doctype html>
<html>
    <head>

    </head>
    <body>
        <div id="blocklyArea" class="w(100%) h(100%)">
            <div id="blocklyDiv" class="w(100%) h(100%)"></div>
        </div>
        <script type="module">
            import Blockly from "https://esm.sh/v135/blockly@10.2.2"

            Blockly.inject("blocklyDiv", {
                toolbox: {
                    kind: "categoryToolbox",
                    contents: [
                        {
                            kind: "category",
                            name: "Core",
                            contents: [
                                {
                                    kind: "block",
                                    type: "controls_if",
                                }
                            ]
                        }
                    ]
                }
            })

            const blocklyArea = document.getElementById("blocklyArea")
            const blocklyDiv = document.getElementById("blocklyDiv")
            const workspace = Blockly.inject(
                blocklyDiv,
                {
                    toolbox: document.getElementById("toolbox")
                }
            )
            const onresize = e => {
                let element = blocklyArea
                let x = 0
                let y = 0
                do {
                    x += element.offsetLeft
                    y += element.offsetTop
                    element = element.offsetParent
                } while (element)
                blocklyDiv.style.left = x + "px"
                blocklyDiv.style.top = y + "px"
                blocklyDiv.style.width = blocklyArea.offsetWidth + "px"
                blocklyDiv.style.height = blocklyArea.offsetHeight + "px"
                Blockly.svgResize(workspace)
            }
            window.addEventListener("resize", onresize, false)
            onresize()
        </script>
        <script src="https://unpkg.com/adorable-css@1.4.3"></script>
    </body>
</html>